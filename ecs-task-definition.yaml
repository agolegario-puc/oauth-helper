family: oauth-helper
taskRoleArn: "${TASK_ROLE_ARN}"
executionRoleArn: "${TASK_ROLE_ARN}"
cpu: "256"
memory: "512"
networkMode: awsvpc
containerDefinitions:
- name: oauth-helper
  essential: true
  image: thalitamba/oauth-helper:latest
  repositoryCredentials:
    credentialsParameter: "${REPOSITORY_CREDENTIALS}"
  environment:
  - name: SPRING_MAIL_DEFAULT_SENDER
    value: "${SPRING_MAIL_DEFAULT_SENDER}"
  - name: SPRING_MAIL_USERNAME
    value: "${SPRING_MAIL_USERNAME}"
  - name: SPRING_MAIL_HOST
    value: email-smtp.us-east-1.amazonaws.com
  - name: SPRING_LOGGING_LEVEL
    value: DEBUG
  - name: SPRING_MAIL_PASSWORD
    value: "${SPRING_MAIL_PASSWORD}"
  - name: SPRING_MAIL_SMTP_PORT
    value: "465"
  - name: SPRING_DEVTOOLS_LIVERELOAD_ENABLED
    value: "true"
  - name: SPRING_MAIL_SMTP_AUTH
    value: "true"
  - name: REDIS_HOST
    value: "${REDIS_HOST}"
  portMappings:
  - containerPort: 8080
    hostPort: 8080
    protocol: tcp
  healthCheck:
    command:
    - "CMD-SHELL"
    - "wget --no-verbose --tries=1 --spider http://localhost:8080/actuator/health || exit 1"
    interval: 10
    timeout: 5
    retries: 3
    startPeriod: 30
  logConfiguration:
    logDriver: awslogs
    options:
      "awslogs-create-group": "true"
      "awslogs-group": "oauth-helper"
      "awslogs-region": "us-east-1"
      "awslogs-stream-prefix": "oauth-helper"
requiresCompatibilities:
- FARGATE
runtimePlatform:
  cpuArchitecture: X86_64
  operatingSystemFamily: LINUX
